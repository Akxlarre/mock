---
/**
 * Agenda del Veh칤culo
 * RF-088: Visualizaci칩n detallada de disponibilidad (Timeline)
 */
import DashboardLayout from "../../layouts/DashboardLayout.astro";
import Card from "../../components/ui/Card.astro";
import Button from "../../components/ui/Button.astro";
import { ESCUELA_ACTUAL } from "../../lib/mockData";

// Datos simulados para la vista
const vehiculo = {
    patente: "FJ-KL-99",
    modelo: "Toyota Yaris",
    instructor: "Carlos Rojas"
};

const fechaHoy = new Date().toISOString().split('T')[0];
---

<DashboardLayout title="Agenda del Veh칤culo" escuela={ESCUELA_ACTUAL}>
    
    <!-- Encabezado y Navegaci칩n -->
    <div class="mb-8 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
        <div>
            <div class="flex items-center gap-2 mb-2">
                <a href="/flota/vehiculos" class="inline-flex items-center text-sm text-gray-500 hover:text-gray-900 transition-colors">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Volver a Flota
                </a>
            </div>
            <h1 class="text-3xl font-semibold text-gray-900">Agenda del Veh칤culo</h1>
            <p class="text-secondary mt-1">
                {vehiculo.modelo} - <span class="font-medium text-gray-900">{vehiculo.patente}</span> - Instructor: {vehiculo.instructor}
            </p>
        </div>

        <div>
            <input type="date" value={fechaHoy} class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border" />
        </div>
    </div>

    <!-- Timeline Vertical -->
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-sm border border-gray-200 p-6">
        <div class="space-y-0 relative">
            
            <!-- L칤nea vertical de fondo -->
            <div class="absolute left-[3.5rem] top-4 bottom-4 w-px bg-gray-200"></div>

            <!-- 08:00 - 09:30: Clase Pr치ctica -->
            <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">08:00</div>
                <div class="flex-1 pb-8 pl-8 relative">
                   <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-red-500 ring-4 ring-white"></div>
                   <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-r-md shadow-sm hover:shadow-md transition-shadow">
                       <div class="flex justify-between items-start">
                           <div>
                               <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 mb-2">
                                   En curso
                               </span>
                               <h3 class="text-lg font-medium text-gray-900">Clase Pr치ctica #4</h3>
                               <p class="text-sm text-gray-600 mt-1">Alumno: Juan P칠rez</p>
                           </div>
                           <div class="text-xs font-medium text-gray-500 bg-white px-2 py-1 rounded border">
                               08:00 - 09:30
                           </div>
                       </div>
                   </div>
                </div>
            </div>

            <!-- 09:30 - 10:00: Traslado (Vac칤o) -->
             <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">09:30</div>
                <div class="flex-1 pb-8 pl-8 relative">
                    <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-gray-300 ring-4 ring-white"></div>
                    <div class="bg-gray-50 border border-gray-200 border-dashed p-3 rounded-md min-h-[60px] flex items-center justify-center">
                        <span class="text-sm text-gray-400 italic">Tiempo de traslado / Espera</span>
                    </div>
                </div>
            </div>

            <!-- 10:00 - 11:30: Clase Pr치ctica -->
            <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">10:00</div>
                <div class="flex-1 pb-8 pl-8 relative">
                   <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-red-500 ring-4 ring-white"></div>
                   <div class="bg-white border-l-4 border-red-500 p-4 rounded-r-md shadow-sm border-t border-r border-b border-gray-100 hover:shadow-md transition-shadow">
                       <div class="flex justify-between items-start">
                           <div>
                               <h3 class="text-lg font-medium text-gray-900">Clase Pr치ctica #5</h3>
                               <p class="text-sm text-gray-600 mt-1">Alumna: Ana Silva</p>
                           </div>
                           <div class="text-xs font-medium text-gray-500 bg-gray-50 px-2 py-1 rounded border">
                               10:00 - 11:30
                           </div>
                       </div>
                   </div>
                </div>
            </div>

            <!-- 11:30 - 12:00: Hueco Vac칤o -->
             <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">11:30</div>
                <div class="flex-1 pb-8 pl-8 relative">
                    <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-gray-300 ring-4 ring-white"></div>
                </div>
             </div>


            <!-- 12:00 - 13:00: Taller Mec치nico -->
            <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">12:00</div>
                <div class="flex-1 pb-8 pl-8 relative">
                   <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-yellow-500 ring-4 ring-white"></div>
                   <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-r-md shadow-sm hover:shadow-md transition-shadow">
                       <div class="flex justify-between items-start">
                           <div class="flex items-start gap-3">
                               <div class="mt-1">
                                   <span class="text-2xl">游댢</span>
                               </div>
                               <div>
                                   <h3 class="text-lg font-medium text-gray-900">Taller Mec치nico</h3>
                                   <p class="text-sm text-gray-600 mt-1">Revisi칩n de frenos</p>
                               </div>
                           </div>
                           <div class="text-xs font-medium text-gray-500 bg-white px-2 py-1 rounded border">
                               12:00 - 13:00
                           </div>
                       </div>
                   </div>
                </div>
            </div>

            <!-- 13:00 - 14:00: Disponible -->
            <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">13:00</div>
                <div class="flex-1 pb-8 pl-8 relative">
                   <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-green-500 ring-4 ring-white"></div>
                   <div class="bg-green-50 border border-green-200 border-dashed p-4 rounded-md flex items-center justify-between hover:bg-green-100 transition-colors cursor-pointer group-hover:border-green-300">
                       <div class="flex items-center gap-2">
                           <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                           <span class="font-medium text-green-900">DISPONIBLE</span>
                       </div>
                       <button class="px-3 py-1 bg-white border border-green-300 rounded text-sm font-medium text-green-700 shadow-sm hover:bg-green-50">
                           + Asignar Clase Aqu칤
                       </button>
                   </div>
                </div>
            </div>
            
             <!-- 14:00 - 15:00: Hueco Vac칤o -->
             <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">14:00</div>
                <div class="flex-1 pb-8 pl-8 relative">
                    <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-gray-300 ring-4 ring-white"></div>
                </div>
             </div>


            <!-- 15:00 - 16:30: Clase Pr치ctica -->
            <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">15:00</div>
                <div class="flex-1 pb-8 pl-8 relative">
                   <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-red-500 ring-4 ring-white"></div>
                   <div class="bg-white border-l-4 border-red-500 p-4 rounded-r-md shadow-sm border-t border-r border-b border-gray-100 hover:shadow-md transition-shadow">
                       <div class="flex justify-between items-start">
                           <div>
                               <h3 class="text-lg font-medium text-gray-900">Clase Pr치ctica #6</h3>
                               <p class="text-sm text-gray-600 mt-1">Alumno: Pedro P.</p>
                           </div>
                           <div class="text-xs font-medium text-gray-500 bg-gray-50 px-2 py-1 rounded border">
                               15:00 - 16:30
                           </div>
                       </div>
                   </div>
                </div>
            </div>
            
             <!-- 16:30 - 18:00: Final -->
             <div class="flex group">
                <div class="w-14 text-sm font-medium text-gray-500 pt-3 text-right pr-4">16:30</div>
                <div class="flex-1 pb-0 pl-8 relative">
                    <div class="absolute left-[-5px] top-4 w-2.5 h-2.5 rounded-full bg-gray-400 ring-4 ring-white"></div>
                    <p class="text-sm text-gray-400 pt-3">Fin de jornada</p>
                </div>
             </div>

        </div>
    </div>

</DashboardLayout>
