---
/**
 * Liquidaciones de Instructores - Vista AdministraciÃ³n
 * NÃ³mina, anticipos y pagos a instructores por periodo mensual
 */
import DashboardLayout from "../../layouts/DashboardLayout.astro";
import Card from "../../components/ui/Card.astro";
import Button from "../../components/ui/Button.astro";
---

<DashboardLayout title="Liquidaciones de Instructores">
  <div class="space-y-8">
    <!-- Header -->
    <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
      <div class="space-y-1">
        <h1 class="text-3xl font-bold text-gray-900 tracking-tighter">
          Liquidaciones de Instructores
        </h1>
        <p class="text-sm text-gray-500">GestiÃ³n de nÃ³mina y pagos mensuales</p>
      </div>

      <div class="flex items-center gap-3">
        <!-- Selector de Periodo -->
        <div class="relative">
          <select
            id="select-periodo"
            class="appearance-none h-11 pl-4 pr-10 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded-md shadow-sm hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 transition-all duration-200 cursor-pointer"
          >
            <option value="marzo-2026" selected>Marzo 2026</option>
            <option value="febrero-2026">Febrero 2026</option>
            <option value="enero-2026">Enero 2026</option>
            <option value="diciembre-2025">Diciembre 2025</option>
          </select>
          <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </div>
        </div>
      </div>
    </header>

    <!-- Tarjetas KPI -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <!-- KPI 1: Total NÃ³mina -->
      <Card class="p-6">
        <div class="flex items-center gap-3 mb-2">
          <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
            <span class="text-xl">ðŸ’°</span>
          </div>
          <div>
            <p class="text-xs text-gray-500">Total NÃ³mina</p>
            <p class="text-2xl font-bold text-gray-900">$2.450.000</p>
          </div>
        </div>
        <p class="text-xs text-gray-400">Suma bruta del periodo</p>
      </Card>

      <!-- KPI 2: Anticipos a Descontar -->
      <Card class="p-6">
        <div class="flex items-center gap-3 mb-2">
          <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
            <span class="text-xl">ðŸ“‰</span>
          </div>
          <div>
            <p class="text-xs text-gray-500">Anticipos a Descontar</p>
            <p class="text-2xl font-bold text-red-600">-$350.000</p>
          </div>
        </div>
        <p class="text-xs text-gray-400">Total de adelantos entregados</p>
      </Card>

      <!-- KPI 3: Estado de Pagos -->
      <Card class="p-6">
        <div class="flex items-center gap-3 mb-2">
          <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
            <span class="text-xl">âœ…</span>
          </div>
          <div>
            <p class="text-xs text-gray-500">Estado de Pagos</p>
            <p class="text-2xl font-bold text-gray-900">
              2 <span class="text-base font-normal text-gray-400">/ 5 Pagados</span>
            </p>
          </div>
        </div>
        <div class="w-full bg-gray-100 rounded-full h-1.5 mt-1">
          <div class="bg-green-500 h-1.5 rounded-full" style="width: 40%"></div>
        </div>
      </Card>
    </div>

    <!-- Barra de bÃºsqueda -->
    <section class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm">
      <div class="flex flex-col sm:flex-row items-start sm:items-center gap-3">
        <div class="relative flex-1 w-full sm:max-w-md">
          <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3.5">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4.5 w-4.5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </div>
          <input
            type="text"
            id="search-instructor"
            placeholder="Buscar instructor por nombre..."
            class="w-full h-11 pl-10 pr-4 text-sm text-gray-900 bg-gray-50 border border-gray-200 rounded-lg hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent focus:bg-white transition-all duration-200"
          />
        </div>

        <!-- Resumen rÃ¡pido -->
        <div class="flex items-center gap-4 ml-auto text-sm text-gray-500">
          <div class="flex items-center gap-1.5">
            <span class="w-2 h-2 rounded-full bg-amber-500"></span>
            <span><span class="font-semibold text-gray-700">3</span> Pendientes</span>
          </div>
          <div class="flex items-center gap-1.5">
            <span class="w-2 h-2 rounded-full bg-green-500"></span>
            <span><span class="font-semibold text-gray-700">2</span> Pagados</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Tabla de Liquidaciones -->
    <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse" id="tabla-liquidaciones">
          <thead class="bg-gray-50 border-b border-gray-200">
            <tr>
              <th class="px-5 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider min-w-[200px]">Instructor</th>
              <th class="px-5 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider w-32 text-center">Horas Realizadas</th>
              <th class="px-5 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider w-36 text-right">Base (Ganado)</th>
              <th class="px-5 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider w-40 text-center">Anticipos (Descuento)</th>
              <th class="px-5 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider w-36 text-right">Total a Pagar</th>
              <th class="px-5 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider w-44 text-center">Acciones</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100">
            <!-- Fila 1: Carlos Rojas â€” Pendiente -->
            <tr class="hover:bg-gray-50/60 transition-colors">
              <td class="px-5 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-9 h-9 bg-gray-900 rounded-full flex items-center justify-center text-white text-xs font-semibold flex-shrink-0">CR</div>
                  <div>
                    <p class="text-sm font-medium text-gray-900">Carlos Rojas</p>
                    <p class="text-xs text-gray-500">11.222.333-4</p>
                  </div>
                </div>
              </td>
              <td class="px-5 py-4 text-center">
                <span class="text-sm font-semibold text-blue-600">120h</span>
              </td>
              <td class="px-5 py-4 text-right">
                <span class="text-sm font-semibold text-gray-900">$600.000</span>
              </td>
              <td class="px-5 py-4 text-center">
                <input
                  type="text"
                  value="100000"
                  id="anticipo-1"
                  class="w-24 h-9 text-center text-sm font-semibold text-red-600 bg-red-50 border border-red-200 rounded-lg shadow-sm hover:border-red-300 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all duration-200"
                />
                <p class="text-[10px] text-red-500 mt-0.5 font-medium">-$100.000</p>
              </td>
              <td class="px-5 py-4 text-right">
                <span class="text-sm font-bold text-gray-900">$500.000</span>
              </td>
              <td class="px-5 py-4 text-center">
                <button class="inline-flex items-center gap-1.5 px-4 py-2 text-xs font-semibold text-white bg-green-600 border border-green-700 rounded-lg hover:bg-green-700 shadow-sm transition-all duration-200" id="pagar-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                  </svg>
                  Pagar
                </button>
              </td>
            </tr>

            <!-- Fila 2: Ana MartÃ­nez â€” Pagado -->
            <tr class="hover:bg-gray-50/60 transition-colors bg-green-50/30">
              <td class="px-5 py-4">
                <div class="flex items-center gap-3">
                  <div class="w-9 h-9 bg-gray-900 rounded-full flex items-center justify-center text-white text-xs font-semibold flex-shrink-0">AM</div>
                  <div>
                    <p class="text-sm font-medium text-gray-900">Ana MartÃ­nez</p>
                    <p class="text-xs text-gray-500">15.678.901-2</p>
                  </div>
                </div>
              </td>
              <td class="px-5 py-4 text-center">
                <span class="text-sm font-semibold text-blue-600">80h</span>
              </td>
              <td class="px-5 py-4 text-right">
                <span class="text-sm font-semibold text-gray-900">$400.000</span>
              </td>
              <td class="px-5 py-4 text-center">
                <span class="text-sm text-gray-400">$0</span>
              </td>
              <td class="px-5 py-4 text-right">
                <span class="text-sm font-bold text-gray-900">$400.000</span>
              </td>
              <td class="px-5 py-4 text-center">
                <div class="flex items-center justify-center gap-2">
                  <span class="inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 ring-1 ring-inset ring-green-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Pagado
                  </span>
                  <button class="inline-flex items-center gap-1 px-2.5 py-1 text-[11px] font-medium text-gray-500 bg-gray-100 border border-gray-200 rounded-lg hover:bg-gray-200 hover:text-gray-700 transition-all duration-200" id="deshacer-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
                    </svg>
                    Deshacer
                  </button>
                </div>
              </td>
            </tr>
          </tbody>

          <!-- Totales al pie -->
          <tfoot>
            <tr class="bg-gray-50 border-t-2 border-gray-200">
              <td class="px-5 py-4 text-sm font-bold text-gray-900">TOTALES</td>
              <td class="px-5 py-4 text-center">
                <span class="text-sm font-bold text-blue-700">200h</span>
              </td>
              <td class="px-5 py-4 text-right">
                <span class="text-sm font-bold text-gray-900">$1.000.000</span>
              </td>
              <td class="px-5 py-4 text-center">
                <span class="text-sm font-bold text-red-600">-$100.000</span>
              </td>
              <td class="px-5 py-4 text-right">
                <span class="text-sm font-bold text-gray-900">$900.000</span>
              </td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>
</DashboardLayout>
